{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/chels/webdev/lifelines/app/javascript/packs/app/dashboard/DonorForm/DonorFormContainer.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport DonorFormViaAdmin from './DonorFormViaAdmin';\nimport DonorFormViaClinic from './DonorFormViaClinic';\nimport axios from 'axios';\nvar token = document.querySelector(\"[name=csrf-token]\").content;\naxios.defaults.headers.common[\"X-CSRF-TOKEN\"] = token;\n\nvar DonorForm = function DonorForm(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      verificationType = _useState2[0],\n      setVerificationType = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      input = _useState4[0],\n      setInput = _useState4[1];\n\n  var trackInput = function trackInput(value, field) {\n    return setInput(function (prevInputs) {\n      return _objectSpread(_objectSpread({}, prevInputs), {}, _defineProperty({}, field, value));\n    });\n  };\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMessage = _useState8[0],\n      setErrorMessage = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useState11 = useState(\"Everything looks good! Processing your form...\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loadingMessage = _useState12[0],\n      setloadingMessage = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      submitted = _useState14[0],\n      setSubmitted = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      success = _useState16[0],\n      setSuccess = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      successMessage = _useState18[0],\n      setSuccessMessage = _useState18[1];\n\n  var submitHandler = function submitHandler(e, urls) {\n    e.preventDefault();\n    setError(false);\n\n    if (submitted) {\n      setError(true);\n      setSuccess(false);\n      return setErrorMessage(\"Sorry, you may not submit another request until your current one is reviewed.\");\n    }\n\n    if (verificationType == \"admin\") {\n      if (urls.length < 1 || urls[0] == \"\") {\n        setError(true);\n        return setErrorMessage(\"You need to submit at least one document in the Document 1 field.\");\n      }\n\n      setLoading(true);\n      axios.post(\"/api/v1/verifications\", {\n        verification: input\n      }).then(function (res) {\n        return res.data.verification;\n      }).then(function (verification) {\n        uploadDocuments(urls, verification.id);\n      }).then(function (res) {\n        setLoading(false);\n        setSuccess(true);\n        setSubmitted(true);\n        setSuccessMessage(\"Your verification request has been received. Please allow the team up to 7 working days to get back to you.\");\n      })[\"catch\"](function (err) {\n        console.log(\"There was an error in posting\");\n        console.log(err);\n        setError(true);\n        setLoading(false);\n        setErrorMessage('Sorry, there was an error processing your form. Please try again, or contact us @ lifelines.team@gmail.com for additional support.');\n      });\n    }\n\n    if (verificationType == \"clinic\") {\n      if (!input.owner_name || input.owner_name.length < 5) {\n        setError(true);\n        return setErrorMessage(\"Owner's name is too short. (Minimum 5 character)\");\n      } else if (!input.pet_name || input.pet_name.length < 1) {\n        setError(true);\n        return setErrorMessage(\"Pet's name is too short. (Minimum 1 character.)\");\n      } else if (!input.mobile || input.mobile.length < 8) {\n        setError(true);\n        return setErrorMessage(\"Please double check your mobile number.\");\n      } else if (!input.authorizer_id) {\n        setError(true);\n        return setErrorMessage(\"Please select a clinic.\");\n      }\n\n      setLoading(true);\n      axios.post(\"/api/v1/verifications\", {\n        verification: input\n      }).then(function (res) {\n        setLoading(false);\n        setSuccess(true);\n        setSubmitted(true);\n        setSuccessMessage(\"Your verification request has been received. Please allow the team up to 7 working days to get back to you.\");\n      })[\"catch\"](function (err) {\n        console.log(\"There was an error in posting\");\n        console.log(err);\n        setError(true);\n        setLoading(false);\n        setErrorMessage('Sorry, there was an error processing your form. Please try again, or contact us @ lifelines.team@gmail.com for additional support.');\n      });\n    }\n  };\n\n  var uploadDocuments = function uploadDocuments(arrOfUrls, verificationId) {\n    arrOfUrls.forEach(function (url) {\n      if (url == \"\") {\n        return;\n      }\n\n      var documentObj = {\n        verification_id: verificationId,\n        url: url\n      };\n      axios.post('/api/v1/documents', documentObj).then(function (res) {\n        console.log(\"Created the document\");\n        console.log(res.data);\n      })[\"catch\"](function (err) {\n        console.log(err);\n        setError(true);\n        setErrorMessage(\"Error when creating the documents.\");\n      });\n    });\n  };\n\n  useEffect(function () {\n    console.log(input);\n  }, [input]);\n  useEffect(function () {\n    console.log(error);\n    console.log(errorMessage);\n  }, [error]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, \"Is my pet eligible to be a blood donor?\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, \"General Requirements\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, \"Good temperament and health\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Able to tolerate restraint and venipuncture (collection of blood from vein)\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"1 to 8 years old\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"Male or nulliparous (never pregnant) female\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Up to date on vaccination\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, \"On heartworm preventive and tick/flea control\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \"No history of receiving blood transfusion\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, \"Not on any medications that could pose a problem for the recipient\"))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Weight Requirements\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, \"Dogs: Weighs at least 30kg\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, \"Cats: Weighs at least 5kg\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, \"What details do I need to give?\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }), \"If you \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 20\n    }\n  }, \"you have visited a veterinary clinic that is partnered with us in the last year\"), \", we will need:\", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, \"Your full name\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, \"Contact number\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Eligible pet's name\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }), \"If you\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, \"have not visited a veterinary clinic in the past year, or the clinic you have visited is not on our list of partners\"), \", you may submit documents like:\", /*#__PURE__*/React.createElement(\"ul\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, \"Medical records\"), /*#__PURE__*/React.createElement(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, \"Proof of ownership (e.g. license from AVA)\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      setInput(function (prevInput) {\n        return _objectSpread(_objectSpread({}, prevInput), {}, {\n          authorizer_id: null,\n          verification_for: \"donor\"\n        });\n      });\n      setVerificationType(\"clinic\");\n    },\n    className: \"btn btn-lg btn-dark w-90\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"Apply through a partner clinic\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      setInput(function (prevInput) {\n        return _objectSpread(_objectSpread({}, prevInput), {}, {\n          authorizer_id: 30,\n          verification_for: \"donor\"\n        });\n      });\n      setVerificationType(\"admin\");\n    },\n    className: \"btn btn-lg btn-secondary w-90\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"Apply with documents\"))), verificationType == \"clinic\" && /*#__PURE__*/React.createElement(DonorFormViaClinic, {\n    error: error,\n    errorMessage: errorMessage,\n    tracker: trackInput,\n    submit: submitHandler,\n    loading: loading,\n    loadingMessage: loadingMessage,\n    success: success,\n    submitted: submitted,\n    successMessage: successMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }), verificationType == \"admin\" && /*#__PURE__*/React.createElement(DonorFormViaAdmin, {\n    submit: submitHandler,\n    error: error,\n    errorMessage: errorMessage,\n    tracker: trackInput,\n    loading: loading,\n    submitted: submitted,\n    loadingMessage: loadingMessage,\n    success: success,\n    successMessage: successMessage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 11\n    }\n  }));\n};\n\nexport default DonorForm;","map":{"version":3,"sources":["/Users/chels/webdev/lifelines/app/javascript/packs/app/dashboard/DonorForm/DonorFormContainer.js"],"names":["React","useState","useEffect","DonorFormViaAdmin","DonorFormViaClinic","axios","token","document","querySelector","content","defaults","headers","common","DonorForm","props","verificationType","setVerificationType","input","setInput","trackInput","value","field","prevInputs","error","setError","errorMessage","setErrorMessage","loading","setLoading","loadingMessage","setloadingMessage","submitted","setSubmitted","success","setSuccess","successMessage","setSuccessMessage","submitHandler","e","urls","preventDefault","length","post","verification","then","res","data","uploadDocuments","id","err","console","log","owner_name","pet_name","mobile","authorizer_id","arrOfUrls","verificationId","forEach","url","documentObj","verification_id","prevInput","verification_for"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport DonorFormViaAdmin from './DonorFormViaAdmin'\nimport DonorFormViaClinic from './DonorFormViaClinic'\nimport axios from 'axios'\nconst token = document.querySelector(\"[name=csrf-token]\").content;\naxios.defaults.headers.common[\"X-CSRF-TOKEN\"] = token;\n\n\nconst DonorForm = (props)=> {\n\n    const [verificationType, setVerificationType] = useState(null)\n    const [input, setInput] = useState({})\n\n    const trackInput = (value, field) => {\n        return setInput(prevInputs => {\n            return {\n            ...prevInputs,\n            [field]: value\n            }\n        })\n    }\n\n\n    const [error, setError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    const [loading, setLoading] = useState(false)\n    const [loadingMessage, setloadingMessage] = useState(\"Everything looks good! Processing your form...\")\n    const [submitted, setSubmitted] = useState(false)\n    const [success, setSuccess] = useState(false)\n    const [successMessage, setSuccessMessage] = useState(\"\")\n\n    const submitHandler = (e, urls) => {\n\n      e.preventDefault();\n      setError(false)\n\n      if (submitted) {\n          setError(true)\n          setSuccess(false)\n          return setErrorMessage(\"Sorry, you may not submit another request until your current one is reviewed.\")\n      }\n\n      if (verificationType==\"admin\") {\n\n            if (urls.length < 1 || urls[0]==\"\") {\n                setError(true)\n                return setErrorMessage(\"You need to submit at least one document in the Document 1 field.\")\n            }\n\n            setLoading(true);\n\n            axios\n            .post(\"/api/v1/verifications\", {verification: input})\n            .then(res => {\n                return res.data.verification\n            })\n            .then(verification => {\n                uploadDocuments(urls, verification.id)\n            }).then( res => {\n                                                setLoading(false);\n                                                setSuccess(true);\n                                                setSubmitted(true);\n                                                setSuccessMessage(\n                                                  \"Your verification request has been received. Please allow the team up to 7 working days to get back to you.\"\n                                                );\n            })\n            .catch(err => {\n                console.log(`There was an error in posting`)\n                console.log(err)\n                setError(true)\n                setLoading(false)\n                setErrorMessage('Sorry, there was an error processing your form. Please try again, or contact us @ lifelines.team@gmail.com for additional support.')\n            })\n        }\n\n\n      if (verificationType==\"clinic\") {\n          if (!input.owner_name || input.owner_name.length < 5) {\n            setError(true);\n            return setErrorMessage(\"Owner's name is too short. (Minimum 5 character)\");\n          } else if (!input.pet_name || input.pet_name.length < 1) {\n            setError(true);\n            return setErrorMessage(\"Pet's name is too short. (Minimum 1 character.)\");\n          } else if (!input.mobile || input.mobile.length < 8) {\n            setError(true);\n            return setErrorMessage(\"Please double check your mobile number.\");              \n          } else if (!input.authorizer_id) {\n            setError(true);\n            return setErrorMessage(\"Please select a clinic.\");         \n          }\n        setLoading(true);\n\n        axios\n        .post(\"/api/v1/verifications\", {verification: input})\n        .then(res => {\n            setLoading(false)\n            setSuccess(true)\n            setSubmitted(true)\n            setSuccessMessage(\"Your verification request has been received. Please allow the team up to 7 working days to get back to you.\")\n        })\n        .catch(err => {\n            console.log(`There was an error in posting`)\n            console.log(err)\n            setError(true)\n            setLoading(false)\n            setErrorMessage('Sorry, there was an error processing your form. Please try again, or contact us @ lifelines.team@gmail.com for additional support.')\n        })\n        }\n    }\n        \n\n\n    const uploadDocuments = (arrOfUrls, verificationId) => {\n        arrOfUrls.forEach(url => {\n            if (url==\"\") {\n                return\n            }\n\n            let documentObj = {\n                verification_id: verificationId,\n                url: url\n            }\n\n            axios.post('/api/v1/documents', documentObj)\n            .then( res => {\n                console.log(`Created the document`)\n                console.log(res.data)\n            })\n            .catch(err => {\n                console.log(err)\n                setError(true)\n                setErrorMessage(\"Error when creating the documents.\")\n            })\n        })\n    }\n\n    useEffect(()=> {\n        console.log(input)\n    }, [input]);\n\n    useEffect(()=> {\n        console.log(error)\n        console.log(errorMessage)\n    }, [error])\n\n    return (\n      <div className=\"container\">\n        <div className=\"mb-3\">\n          <h2>Is my pet eligible to be a blood donor?</h2>\n        </div>\n        <div className=\"mb-4\">\n          <div>\n            <span className=\"font-weight-bold\">General Requirements</span>\n\n            <ul>\n              <li>Good temperament and health</li>\n              <li>\n                Able to tolerate restraint and venipuncture (collection of blood\n                from vein)\n              </li>\n              <li>1 to 8 years old</li>\n              <li>Male or nulliparous (never pregnant) female</li>\n              <li>Up to date on vaccination</li>\n              <li>On heartworm preventive and tick/flea control</li>\n              <li>No history of receiving blood transfusion</li>\n              <li>\n                Not on any medications that could pose a problem for the\n                recipient\n              </li>\n            </ul>\n          </div>\n          <div>\n            <span className=\"font-weight-bold\">Weight Requirements</span>\n\n            <ul>\n              <li>Dogs: Weighs at least 30kg</li>\n              <li>Cats: Weighs at least 5kg</li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"mb-5\">\n          <h2>What details do I need to give?</h2>\n          <br/>\n            If you <span className=\"font-weight-bold\">\n              you have visited a veterinary clinic that is partnered with us in\n              the last year\n            </span>\n            , we will need:\n            <ul>\n              <li>Your full name</li>\n              <li>Contact number</li>\n              <li>Eligible pet's name</li>\n            </ul>\n          <br/>\n            If you{\" \"}\n            <span className=\"font-weight-bold\">\n              have not visited a veterinary clinic in the past year, or the\n              clinic you have visited is not on our list of partners\n            </span>\n            , you may submit documents like:\n            <ul>\n              <li>Medical records</li>\n              <li>Proof of ownership (e.g. license from AVA)</li>\n            </ul>\n        </div>\n\n        <div className=\"row mb-3\">\n          <div className=\"col-6 text-center\">\n            <button\n              onClick={() => {\n                setInput((prevInput) => {\n                  return {\n                    ...prevInput,\n                    authorizer_id: null,\n                    verification_for: \"donor\",\n                  };\n                });\n                setVerificationType(\"clinic\");\n              }}\n              className=\"btn btn-lg btn-dark w-90\"\n            >\n              Apply through a partner clinic\n            </button>\n          </div>\n          <div className=\"col-6 text-center\">\n            <button\n              onClick={() => {\n                setInput((prevInput) => {\n                  return {\n                    ...prevInput,\n                    authorizer_id: 30,\n                    verification_for: \"donor\",\n                  };\n                });\n                setVerificationType(\"admin\");\n              }}\n              className=\"btn btn-lg btn-secondary w-90\"\n            >\n              Apply with documents\n            </button>\n          </div>\n        </div>\n        {verificationType == \"clinic\" && (\n          <DonorFormViaClinic\n            error={error}\n            errorMessage={errorMessage}\n            tracker={trackInput}\n            submit={submitHandler}\n            loading={loading}\n            loadingMessage={loadingMessage}\n            success={success}\n            submitted={submitted}\n            successMessage={successMessage}\n          />\n        )}\n        {verificationType == \"admin\" && (\n          <DonorFormViaAdmin\n            submit={submitHandler}\n            error={error}\n            errorMessage={errorMessage}\n            tracker={trackInput}\n            loading={loading}\n            submitted={submitted}\n            loadingMessage={loadingMessage}\n            success={success}\n            successMessage={successMessage}\n          />\n        )}\n      </div>\n    );\n}\n\nexport default DonorForm"]},"metadata":{},"sourceType":"module"}