{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/chels/webdev/lifelines/app/javascript/packs/app/appeals/components/AppealListing.jsx\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchOneAppeal as _fetchOneAppeal } from '../actions';\nimport { Link, NavLink } from 'react-router-dom';\nimport Distance from './Distance';\nimport moment from 'moment';\n\nvar AppealListing = function AppealListing(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      calculatedDistance = _useState2[0],\n      setCalculatedDistance = _useState2[1];\n\n  useEffect(function () {\n    var destination = [props.appeal.clinic.address.split(\" \").join(\"+\")];\n    var origin = \"\";\n\n    if (props.geolocation !== null && props.geolocation !== \"\") {\n      origin = [{\n        lat: props.geolocation.lat,\n        lng: props.geolocation.lng\n      }];\n    }\n\n    if (props.postal !== \"\" && props.postal !== null) {\n      origin = [props.postal];\n    }\n\n    if (origin !== \"\") {\n      var matrix = new props.google.maps.DistanceMatrixService();\n      matrix.getDistanceMatrix({\n        origins: origin,\n        destinations: destination,\n        travelMode: google.maps.TravelMode.DRIVING\n      }, function (res, status) {\n        setCalculatedDistance(status == \"OK\" ? \"\".concat(res.rows[0].elements[0].distance.text, \" | \").concat(res.rows[0].elements[0].duration.text) : \"Error in calculation\");\n        props.setDist(props.appeal.id, res.rows[0].elements[0].distance.text);\n      });\n    }\n  }, [props.geolocation, props.postal]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"media appeal-listing container p-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3 result-thumbnail\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/appeals/\".concat(props.appeal.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    onClick: function onClick() {\n      props.fetchOneAppeal(props.appeal.id);\n    },\n    src: props.appeal.img_url !== \"\" && props.appeal.img_url ? props.appeal.img_url : \"https://res.cloudinary.com/dwbuqa4dx/image/upload/v1592316118/logo1_bf4f9f.png\",\n    className: \"mr-3\",\n    alt: \"...\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"media-body col-9\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listing-header mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"text-dark\",\n    to: \"/appeals/\".concat(props.appeal.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, props.appeal.species.name, \" donor needed at\", \" \", props.appeal.clinic.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"From:\", \" \", /*#__PURE__*/React.createElement(Link, {\n    className: \"text-secondary\",\n    to: \"/users/\".concat(props.appeal.user.id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, props.appeal.user.profile.display_name, \" \", props.appeal.user.profile.verified && /*#__PURE__*/React.createElement(\"i\", {\n    \"class\": \"fas fa-user-check text-success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }), \"Added \", moment(props.appeal.created_at).fromNow(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }), \"Status:\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: props.appeal.status == \"open\" ? \"text-success\" : \"text-danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \" \", props.appeal.status)), /*#__PURE__*/React.createElement(Distance, {\n    distance: calculatedDistance,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), props.auth.currentUser.user.id == props.appeal.user.id && /*#__PURE__*/React.createElement(NavLink, {\n    className: \"btn btn-sm mt-1 btn-secondary\",\n    to: \"/edit/appeal/\".concat(props.appeal.id),\n    exact: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Edit Your Appeal\"))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchOneAppeal: function fetchOneAppeal(url) {\n      dispatch(_fetchOneAppeal(url));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppealListing);","map":{"version":3,"sources":["/Users/chels/webdev/lifelines/app/javascript/packs/app/appeals/components/AppealListing.jsx"],"names":["React","useState","useEffect","connect","fetchOneAppeal","Link","NavLink","Distance","moment","AppealListing","props","calculatedDistance","setCalculatedDistance","destination","appeal","clinic","address","split","join","origin","geolocation","lat","lng","postal","matrix","google","maps","DistanceMatrixService","getDistanceMatrix","origins","destinations","travelMode","TravelMode","DRIVING","res","status","rows","elements","distance","text","duration","setDist","id","img_url","species","name","user","profile","display_name","verified","created_at","fromNow","auth","currentUser","mapStateToProps","state","mapDispatchToProps","dispatch","url"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux';\nimport { fetchOneAppeal } from '../actions'\nimport { Link, NavLink } from 'react-router-dom';\nimport Distance from './Distance'\nimport moment from 'moment'\n\nconst AppealListing = (props) => {\n  \n  const [calculatedDistance, setCalculatedDistance] = useState(\"\");\n\n    useEffect(() => {\n    let destination = [props.appeal.clinic.address.split(\" \").join(\"+\")];\n    let origin = \"\"\n\n    if (props.geolocation!==null && props.geolocation!==\"\"){\n      origin = [{lat: props.geolocation.lat, lng: props.geolocation.lng}]\n    }\n    if (props.postal!==\"\" && props.postal!==null) {\n      origin = [props.postal]\n    }        \n    if (origin!==\"\"){\n      const matrix = new props.google.maps.DistanceMatrixService();\n      matrix.getDistanceMatrix(\n            {\n              origins: origin,\n              destinations: destination,\n              travelMode: google.maps.TravelMode.DRIVING,\n            },\n            (res, status) => {\n              setCalculatedDistance(\n                status == \"OK\"\n                  ? `${res.rows[0].elements[0].distance.text} | ${res.rows[0].elements[0].duration.text}`\n                  : \"Error in calculation\"\n              );\n\n              props.setDist(props.appeal.id, res.rows[0].elements[0].distance.text)\n            }\n          );\n        }\n      }, [props.geolocation, props.postal]);\n\n\n    return (\n      <div className=\"media appeal-listing container p-2\">\n        <div className=\"row\">\n          <div className=\"col-3 result-thumbnail\">\n            <Link to={`/appeals/${props.appeal.id}`}>\n              <img\n                onClick={() => {\n                  props.fetchOneAppeal(props.appeal.id);\n                }}\n                src={\n                  props.appeal.img_url !== \"\" && props.appeal.img_url\n                    ? props.appeal.img_url\n                    : \"https://res.cloudinary.com/dwbuqa4dx/image/upload/v1592316118/logo1_bf4f9f.png\"\n                }\n                className=\"mr-3\"\n                alt=\"...\"\n              />\n            </Link>\n          </div>\n          <div className=\"media-body col-9\">\n            <div className=\"listing-header mt-2\">\n              <Link className=\"text-dark\" to={`/appeals/${props.appeal.id}`}>\n                {props.appeal.species.name} donor needed at{\" \"}\n                {props.appeal.clinic.name}\n              </Link>\n            </div>\n            <div>\n              From:{\" \"}\n              <Link\n                className=\"text-secondary\"\n                to={`/users/${props.appeal.user.id}`}\n              >\n                {props.appeal.user.profile.display_name}{\" \"}\n                {props.appeal.user.profile.verified && (\n                  <i class=\"fas fa-user-check text-success\"></i>\n                )}\n              </Link>\n              <br />\n              Added {moment(props.appeal.created_at).fromNow()}\n              <br />\n              Status:{\" \"}\n              <span\n                className={\n                  props.appeal.status == \"open\" ? \"text-success\" : \"text-danger\"\n                }\n              >\n                {\" \"}\n                {props.appeal.status}\n              </span>\n            </div>\n\n            <Distance distance={calculatedDistance} />\n            {props.auth.currentUser.user.id == props.appeal.user.id && (\n              <NavLink\n                className=\"btn btn-sm mt-1 btn-secondary\"\n                to={`/edit/appeal/${props.appeal.id}`}\n                exact\n              >\n                Edit Your Appeal\n              </NavLink>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n\n}\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchOneAppeal: (url) => {\n          dispatch(fetchOneAppeal(url))\n        }\n    };\n  };\n  \n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppealListing);"]},"metadata":{},"sourceType":"module"}