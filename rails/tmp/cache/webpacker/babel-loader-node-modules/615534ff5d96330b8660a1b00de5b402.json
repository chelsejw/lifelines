{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/chels/webdev/lifelines/app/javascript/packs/app/dashboard/ProfileForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nvar ProfileForm = function ProfileForm() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgUrl = _useState2[0],\n      setImgUrl = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      imgInputText = _useState4[0],\n      setImgInputText = _useState4[1];\n\n  var _useState5 = useState(\"Click the button to upload!\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      uploadStatus = _useState6[0],\n      setUploadStatus = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      profile = _useState8[0],\n      setProfile = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      formInput = _useState10[0],\n      setFormInput = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      editSuccess = _useState12[0],\n      setEditSuccess = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      editStatus = _useState14[0],\n      setEditStatus = _useState14[1];\n\n  useEffect(function () {\n    axios.get(\"/api/v1/auth/user-profile\").then(function (res) {\n      console.log(res.data.profile);\n      setProfile(res.data.profile);\n      setFormInput(res.data.profile);\n      res.data.img_url !== \"\" ? setUploadStatus(\"has_img\") : setUploadStatus(\"no_img\");\n    })[\"catch\"](function (err) {\n      console.log(\"erroorrrrrrr\");\n      console.log(err);\n    });\n  }, []);\n\n  var trackInputs = function trackInputs(input, field) {\n    console.log(\"Input for \".concat(field, \" is \").concat(input));\n    setFormInput(function (currentInput) {\n      return _objectSpread(_objectSpread({}, currentInput), {}, _defineProperty({}, field, input));\n    });\n  };\n\n  useEffect(function () {\n    console.log(formInput);\n  }, [formInput]);\n\n  var openWidget = function openWidget() {\n    cloudinary.openUploadWidget({\n      cloudName: \"dwbuqa4dx\",\n      uploadPreset: \"m7t9mejb\",\n      sources: [\"local\", \"url\"]\n    }, function (error, result) {\n      if (error) {\n        console.log(\"Err,\", error);\n        return setUploadStatus(\"failed\");\n      }\n\n      if (result.event == \"success\") {\n        console.log(\"Result,\", result);\n        setImgUrl(result.info.url);\n        setUploadStatus(\"success\");\n        setFormInput(function (currentInput) {\n          return _objectSpread(_objectSpread({}, currentInput), {}, {\n            img_url: result.info.url\n          });\n        });\n      }\n    });\n  };\n\n  useEffect(function () {\n    switch (uploadStatus) {\n      case \"success\":\n        setImgInputText(imgUrl);\n        break;\n\n      case \"failed\":\n        setImgInputText(\"FAILED UPLOAD\");\n        break;\n\n      case \"no_img\":\n        setImgInputText(\"Click the button to upload!\");\n        break;\n\n      case \"has_img\":\n        setImgInputText(profile.img_url);\n        break;\n\n      default:\n        setImgInputText(\"Click the button to upload!\");\n        break;\n    }\n  }, [uploadStatus]);\n\n  var patchRequest = function patchRequest() {\n    var token = document.querySelector(\"[name=csrf-token]\").content;\n    axios.defaults.headers.common[\"X-CSRF-TOKEN\"] = token;\n    setEditStatus(\"\");\n    axios.patch(\"/api/v1/auth/user-profile\", {\n      profile: formInput\n    }).then(function (res) {\n      console.log(res.data.status);\n      console.log(res.data);\n      setEditStatus(\"Updated successfully\");\n      setEditSuccess(true);\n    })[\"catch\"](function (err) {\n      console.log(err);\n      setEditStatus(\"Error updating.\");\n      setEditSuccess(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \" Edit Your Profile\"), editStatus !== \"\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-\".concat(editSuccess ? \"success\" : \"danger\"),\n    role: \"alert\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, editStatus), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row my-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 pl-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"displayName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Display Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return trackInputs(e.target.value, e.target.name);\n    },\n    defaultValue: profile.display_name,\n    className: \"form-control\",\n    id: \"displayName\",\n    name: \"display_name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"imgInput\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"Profile Picture\", /*#__PURE__*/React.createElement(\"span\", {\n    onClick: openWidget,\n    className: \"btn-link btn-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, uploadStatus == \"has_img\" ? \"Change\" : \"Upload\")), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"img_url\",\n    disabled: \"disabled\",\n    id: \"imgInput\",\n    placeholder: imgInputText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2 pl-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"verified\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"Verified\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    id: \"verified\",\n    disabled: \"disabled\",\n    name: \"verified\",\n    placeholder: profile.verified ? \"Verified\" : \"Not verified\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"accountType\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, \"Account Type\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    id: \"accountType\",\n    name: \"account_type\",\n    disabled: \"disabled\",\n    placeholder: profile.account_type,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"postalCode\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, \"Postal Code\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    onChange: function onChange(e) {\n      return trackInputs(e.target.value, e.target.name);\n    },\n    placeholder: \"This will help improve your website experience.\",\n    id: \"postalCode\",\n    name: \"address\",\n    defaultValue: profile.address,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col pl-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"bio\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, \"About Me\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return trackInputs(e.target.value, e.target.name);\n    },\n    className: \"form-control\",\n    name: \"bio\",\n    id: \"bio\",\n    defaultValue: profile.bio,\n    placeholder: \"Tell us about yourself.\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: patchRequest,\n    className: \"btn btn-secondary btn-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, \"Update Profile\")))));\n};\n\nexport default ProfileForm;","map":{"version":3,"sources":["/Users/chels/webdev/lifelines/app/javascript/packs/app/dashboard/ProfileForm.js"],"names":["React","useEffect","useState","connect","axios","ProfileForm","imgUrl","setImgUrl","imgInputText","setImgInputText","uploadStatus","setUploadStatus","profile","setProfile","formInput","setFormInput","editSuccess","setEditSuccess","editStatus","setEditStatus","get","then","res","console","log","data","img_url","err","trackInputs","input","field","currentInput","openWidget","cloudinary","openUploadWidget","cloudName","uploadPreset","sources","error","result","event","info","url","patchRequest","token","document","querySelector","content","defaults","headers","common","patch","status","e","target","value","name","display_name","verified","account_type","address","bio"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nconst ProfileForm = () => {\n  const [imgUrl, setImgUrl] = useState(\"\");\n  const [imgInputText, setImgInputText] = useState(\"\");\n  const [uploadStatus, setUploadStatus] = useState(\n    \"Click the button to upload!\"\n  );\n  const [profile, setProfile] = useState(\"\");\n  const [formInput, setFormInput] = useState({});\n  const [editSuccess, setEditSuccess] = useState(false);\n  const [editStatus, setEditStatus] = useState(\"\");\n\n  useEffect(() => {\n    axios\n      .get(`/api/v1/auth/user-profile`)\n      .then((res) => {\n        console.log(res.data.profile);\n        setProfile(res.data.profile);\n        setFormInput(res.data.profile);\n\n        res.data.img_url !== \"\"\n          ? setUploadStatus(\"has_img\")\n          : setUploadStatus(\"no_img\");\n      })\n      .catch((err) => {\n        console.log(`erroorrrrrrr`);\n        console.log(err);\n      });\n  }, []);\n\n  const trackInputs = (input, field) => {\n    console.log(`Input for ${field} is ${input}`);\n    setFormInput((currentInput) => {\n      return { ...currentInput, [field]: input };\n    });\n  };\n\n  useEffect(() => {\n    console.log(formInput);\n  }, [formInput]);\n\n  const openWidget = () => {\n    cloudinary.openUploadWidget(\n      {\n        cloudName: \"dwbuqa4dx\",\n        uploadPreset: \"m7t9mejb\",\n        sources: [\"local\", \"url\"],\n      },\n      (error, result) => {\n        if (error) {\n          console.log(`Err,`, error);\n          return setUploadStatus(\"failed\");\n        }\n        if (result.event == \"success\") {\n          console.log(`Result,`, result);\n          setImgUrl(result.info.url);\n          setUploadStatus(\"success\");\n          setFormInput((currentInput) => {\n            return { ...currentInput, img_url: result.info.url };\n          });\n        }\n      }\n    );\n  };\n\n  useEffect(() => {\n    switch (uploadStatus) {\n      case \"success\":\n        setImgInputText(imgUrl);\n        break;\n      case \"failed\":\n        setImgInputText(\"FAILED UPLOAD\");\n        break;\n      case \"no_img\":\n        setImgInputText(\"Click the button to upload!\");\n        break;\n      case \"has_img\":\n        setImgInputText(profile.img_url);\n        break;\n      default:\n        setImgInputText(\"Click the button to upload!\");\n        break;\n    }\n  }, [uploadStatus]);\n\n  const patchRequest = () => {\n    const token = document.querySelector(\"[name=csrf-token]\").content;\n    axios.defaults.headers.common[\"X-CSRF-TOKEN\"] = token;\n    setEditStatus(\"\");\n\n    axios\n      .patch(`/api/v1/auth/user-profile`, { profile: formInput })\n      .then((res) => {\n        console.log(res.data.status);\n        console.log(res.data);\n\n        setEditStatus(\"Updated successfully\");\n        setEditSuccess(true);\n      })\n      .catch((err) => {\n        console.log(err);\n        setEditStatus(\"Error updating.\");\n        setEditSuccess(false);\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"container\">\n          <h2 className=\"mb-4\"> Edit Your Profile</h2>\n\n          {editStatus !== \"\" && (\n            <div\n              className={`alert alert-${editSuccess ? \"success\" : \"danger\"}`}\n              role=\"alert\"\n            >\n              {editStatus}\n            </div>\n          )}\n\n          <div className=\"row my-2\">\n            <div className=\"col-6 pl-0\">\n              <label htmlFor=\"displayName\">Display Name</label>\n              <input\n                onChange={(e) => trackInputs(e.target.value, e.target.name)}\n                defaultValue={profile.display_name}\n                className=\"form-control\"\n                id=\"displayName\"\n                name=\"display_name\"\n              />\n            </div>\n            <div className=\"col-6\">\n              <label htmlFor=\"imgInput\">\n                Profile Picture\n                <span onClick={openWidget} className=\"btn-link btn-sm\">\n                  {uploadStatus == \"has_img\" ? \"Change\" : \"Upload\"}\n                </span>\n              </label>\n              <input\n                className=\"form-control\"\n                name=\"img_url\"\n                disabled=\"disabled\"\n                id=\"imgInput\"\n                placeholder={imgInputText}\n              />\n            </div>\n          </div>\n\n          <div className=\"row mb-2\">\n            <div className=\"col-2 pl-0\">\n              <label htmlFor=\"verified\">Verified</label>\n              <input\n                className=\"form-control\"\n                id=\"verified\"\n                disabled=\"disabled\"\n                name=\"verified\"\n                placeholder={profile.verified ? \"Verified\" : \"Not verified\"}\n              />\n            </div>\n            <div className=\"col-4\">\n              <label htmlFor=\"accountType\">Account Type</label>\n              <input\n                className=\"form-control\"\n                id=\"accountType\"\n                name=\"account_type\"\n                disabled=\"disabled\"\n                placeholder={\n                  profile.account_type\n                }\n              />\n            </div>\n            <div className=\"col-6\">\n              <label htmlFor=\"postalCode\">Postal Code</label>\n              <input\n                className=\"form-control\"\n                onChange={(e) => trackInputs(e.target.value, e.target.name)}\n                placeholder=\"This will help improve your website experience.\"\n                id=\"postalCode\"\n                name=\"address\"\n                defaultValue={profile.address}\n              />\n            </div>\n          </div>\n\n          <div className=\"row mb-5\">\n            <div className=\"col pl-0\">\n              <label htmlFor=\"bio\">About Me</label>\n\n              <input\n                onChange={(e) => trackInputs(e.target.value, e.target.name)}\n                className=\"form-control\"\n                name=\"bio\"\n                id=\"bio\"\n                defaultValue={profile.bio}\n                placeholder=\"Tell us about yourself.\"\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n              <button\n                onClick={patchRequest}\n                className=\"btn btn-secondary btn-block\"\n              >\n                Update Profile\n              </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileForm;\n"]},"metadata":{},"sourceType":"module"}